---
- name: check if java installed
  command: java -version
  register: java_version
  failed_when: java_version.rc not in [0, 1, 2]
  changed_when: False
  tags: java

- name: add ppa for jre
  apt_repository: repo=ppa:webupd8team/java state=present
  tags: java
  when: java_version.rc == 2

- name: accept oracle license
  shell: echo debconf shared/accepted-oracle-license-v1-1 select true | sudo debconf-set-selections
  tags: java
  when: java_version.rc == 2

- name: install jre
  apt: pkg=oracle-java{{ jdk_version }}-installer state=latest update-cache=yes force=no
  tags: java
  when: java_version.rc == 2

- name: debug msg
  debug: msg=java-{{ jdk_version }}-oracle
